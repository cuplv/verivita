# callback-verification
Dynamic verification using callbacks.


# External Dependencies
- PySMT
- TraceRunner
- Google protobuf 3.0

*WARNING* we require protobuf version 3.0


# Installation

1. You need to install PySMT with z3 (follow the instruction at https://github.com/pysmt/pysmt)

2. Compile the protobuffer interface (from the root directory of the project). You need the TraceRunner repository for this.
```
protoc -I=<TraceRunner-repo>/TraceRunnerRuntimeInstrumentation/tracerunnerinstrumentation/src/main/proto/edu/colorado/plv/tracerunner_runtime_instrumentation --python_out=./cbverifier/traces <TraceRunner-repo>/TraceRunnerRuntimeInstrumentation/tracerunnerinstrumentation/src/main/proto/edu/colorado/plv/tracerunner_runtime_instrumentation/tracemsg.proto
```

3. add the cbverifier path to the PYTHONPATH environment variable



# Usage

## Verify a trace:
```python cbverifier/driver.py -t <trace-file> -s <spec-files> -k <bmc-bound>```

Example:
```
python cbverifier/driver.py -f json -t cbverifier/test/examples/trace1.json -s cbverifier/test/examples/spec1.spec -k 2
```

Note: the `-f json` flag can be used if the trace is in json format. For binary format traces (the default generated by trace runner) no flags are needed)

Note: the verifier tool has different parameters (use `-h` to get an help screen that explain them).


## Check the input files (traces and specs) and print them as output
```python cbverifier/driver.py -m check-files -t <trace-file> -s <spec-files>```


## Print the list of grounded specifications
```python cbverifier/driver.py -m show-ground-specs -t <trace-file> -s <spec-files>```

## Run unit tests:
```nosetests```



# Current limitations - to be solved

- DONTCARE are still not handled by the grounding

- bitmask: add the bitmask to the encoding
